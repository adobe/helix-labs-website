<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snapshot Admin URL Parameter Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .url-example {
            background: #fff;
            padding: 15px;
            border-left: 4px solid #0066cc;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            word-break: break-all;
        }
        .test-link {
            display: inline-block;
            padding: 10px 15px;
            background: #0066cc;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 5px 0;
        }
        .test-link:hover {
            background: #0052a3;
        }
        .feature-list {
            list-style-type: disc;
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <h1>Snapshot Admin URL Parameter Feature</h1>
    
    <div class="demo-section">
        <h2>Overview</h2>
        <p>The snapshot admin now supports automatic parsing of snapshot URLs passed as a URL parameter. When you visit the admin page with a <code>snapshot</code> parameter, it will:</p>
        <ul class="feature-list">
            <li>Parse the URL to extract organization, site, and snapshot name</li>
            <li>Automatically set the site path (org/site)</li>
            <li>Load all snapshots for that org/site</li>
            <li>Automatically expand the specific snapshot mentioned in the URL</li>
            <li>Scroll to the snapshot for easy viewing</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>URL Format</h2>
        <p>The snapshot URL parameter should follow this pattern:</p>
        <div class="url-example">
            ?snapshot=https://main--{site}--{org}.aem.page/.snapshots/{snapshotName}/.manifest.json
        </div>
        
        <h3>Example URLs</h3>
        <div class="url-example">
            ?snapshot=https://main--demo--amol-anand.aem.page/.snapshots/amol-fall-2025/.manifest.json
        </div>
        <div class="url-example">
            ?snapshot=https://main--franklin-docs--adobe.aem.page/.snapshots/winter-release/.manifest.json
        </div>
    </div>

    <div class="demo-section">
        <h2>How It Works</h2>
        <ol>
            <li><strong>URL Parsing:</strong> The system extracts org, site, and snapshot name from the URL</li>
            <li><strong>Auto-Population:</strong> Sets the site path input field automatically</li>
            <li><strong>Snapshot Loading:</strong> Fetches all snapshots for the org/site combination</li>
            <li><strong>Auto-Expansion:</strong> Automatically clicks the "Edit" button for the target snapshot</li>
            <li><strong>Smooth Scrolling:</strong> Scrolls to center the snapshot card in view</li>
            <li><strong>URL Cleanup:</strong> Updates the browser URL to use the cleaner sitePath parameter</li>
        </ol>
    </div>

    <div class="demo-section">
        <h2>Testing</h2>
        <p>To test this functionality, you can use these example links (replace with actual org/site/snapshot values):</p>
        
        <a href="index.html?snapshot=https://main--demo--amol-anand.aem.page/.snapshots/test-snapshot/.manifest.json" 
           class="test-link" target="_blank">
            Test with Sample URL
        </a>
        
        <p><strong>Note:</strong> Make sure the org, site, and snapshot name in the URL actually exist, or you'll get an error.</p>
    </div>

    <div class="demo-section">
        <h2>Error Handling</h2>
        <p>The system includes robust error handling:</p>
        <ul class="feature-list">
            <li>Invalid URL format shows an alert with error message</li>
            <li>Missing snapshots are handled gracefully</li>
            <li>Falls back to normal sitePath parameter if snapshot parameter is invalid</li>
            <li>Preserves existing localStorage functionality</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>Integration with Existing Features</h2>
        <p>This new functionality works seamlessly with existing features:</p>
        <ul class="feature-list">
            <li>Maintains compatibility with existing sitePath parameter</li>
            <li>Preserves localStorage for site path memory</li>
            <li>Works with all existing snapshot management features</li>
            <li>Supports both standalone and URL-driven usage</li>
        </ul>
    </div>
</body>
</html>